<!DOCTYPE html>

<html>

<head>

  <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-router-dom/5.0.1/react-router-dom.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

  <style>
    .nav {
      display: flex;
      justify-content: space-around;
    }

  </style>


</head>

<body>
  <div id='root'>

  </div>

  <script type='text/babel'>
    const { render } = ReactDOM;
    const { Component } = React;
    const { HashRouter, Link, Route} = ReactRouterDOM;
    const root = document.querySelector('#root');

    const Home = () => {
      return (
        <h1>Home</h1>
      )
    }

    const Companies = ({data}) => {
      return(
        <div>
        <h1>Companies</h1>
        {
          data.map(company => {
            return <li key={company.id}>{company.name}</li>
          })
        }
        </div>
      );
    }

    const Products = () => {
      return (
        <h1>Products</h1>
      )
    }


    const Nav = (props) => {
      const companies = props.companies;
      const path = props.location.pathname;
      return(
        <div className ='nav'>
        <Link to='/' className={ path === '/' ? 'selected': ''}>Home</Link>
        <Link to='/companies' className={ path === '/companies' ? 'selected': ''}>Companies({companies.length})</Link>
        <Link to='/products' className={ path === '/products' ? 'selected': ''}>Products</Link>
        </div>
      );
    }
    class App extends Component {
        constructor() {
          super();
          this.state = {
            companies: [],
            products: [],
            offerings: []
          }
        }
    async componentDidMount() {
      const companies = (await axios.get('https://acme-users-api-rev.herokuapp.com/api/companies')).data;
      const products = (await axios.get(
      'https://acme-users-api-rev.herokuapp.com/api/products')).data;
      const offerings = (await axios.get(
      'https://acme-users-api-rev.herokuapp.com/api/offerings')).data;
      this.setState( { companies } );
      // this.setState({ products });
      // this.setState({ offerings });
    }
    render() {
      const { companies} = this.state;
      // const { products } = this.state;
      // const { offerings } = this.state;
      return (
        <HashRouter>
          <div>
         <Route render={ (props) => <Nav companies={companies} location={props.location}/>}/>
         <Route exact path ='/' component ={Home}/>
         <Route path = '/companies' render={()=> <Companies data = {companies}/>} />
          <Route path = '/product' render={()=> <Products data = {products}/>} />
          </div>
        </HashRouter>
      )
    }
      }
    render(<App />, root);
    </script>


</body>


</html>
